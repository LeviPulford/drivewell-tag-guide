<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
  <meta name="description" content="DriveWell Tag Installation Guide - Quick setup in 3 simple steps">
  <meta name="theme-color" content="#0066cc">
  <title>DriveWell Tag Installation Guide</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
:root{--color-primary:#0066cc;--color-primary-dark:#004d99;--color-primary-light:#e6f0fa;--color-success:#00875a;--color-success-bg:#e6f4ef;--color-warning:#b25000;--color-warning-bg:#fff4e6;--color-error:#c41e3a;--color-error-bg:#fce8ec;--color-info:#0066cc;--color-info-bg:#e6f0fa;--color-bg:#ffffff;--color-bg-secondary:#f5f7fa;--color-bg-elevated:#ffffff;--color-text:#1a1a2e;--color-text-secondary:#5a5a72;--color-text-muted:#8a8a9a;--color-border:#e0e4ea;--color-border-strong:#c8cdd5;--shadow-sm:0 1px 2px rgba(0,0,0,0.05);--shadow-md:0 4px 12px rgba(0,0,0,0.08);--shadow-lg:0 8px 24px rgba(0,0,0,0.12);--space-xs:4px;--space-sm:8px;--space-md:16px;--space-lg:24px;--space-xl:32px;--space-2xl:48px;--font-family:'DM Sans',-apple-system,BlinkMacSystemFont,sans-serif;--font-size-xs:0.75rem;--font-size-sm:0.875rem;--font-size-base:1rem;--font-size-lg:1.125rem;--font-size-xl:1.25rem;--font-size-2xl:1.5rem;--font-size-3xl:2rem;--radius-sm:6px;--radius-md:10px;--radius-lg:16px;--radius-full:9999px;--safe-top:env(safe-area-inset-top,0px);--safe-bottom:env(safe-area-inset-bottom,0px);--transition-fast:150ms ease;--transition-normal:250ms ease}
[data-theme="high-contrast"]{--color-primary:#003d7a;--color-text:#000000;--color-text-secondary:#333333;--color-border:#666666;--color-bg-secondary:#f0f0f0}
@media(prefers-reduced-motion:reduce){*,*::before,*::after{animation-duration:0.01ms!important;animation-iteration-count:1!important;transition-duration:0.01ms!important}}
[data-reduce-motion="true"] *,[data-reduce-motion="true"] *::before,[data-reduce-motion="true"] *::after{animation-duration:0.01ms!important;animation-iteration-count:1!important;transition-duration:0.01ms!important}
*,*::before,*::after{box-sizing:border-box}
html{font-size:var(--base-font-size,16px);-webkit-text-size-adjust:100%;scroll-behavior:smooth}
body{margin:0;padding:0;font-family:var(--font-family);font-size:var(--font-size-base);line-height:1.6;color:var(--color-text);background:var(--color-bg);min-height:100vh;min-height:100dvh;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}
:focus-visible{outline:3px solid var(--color-primary);outline-offset:2px}
button:focus:not(:focus-visible){outline:none}
.skip-link{position:absolute;top:-100%;left:var(--space-md);background:var(--color-primary);color:white;padding:var(--space-sm) var(--space-md);border-radius:var(--radius-sm);z-index:1000;text-decoration:none;font-weight:600}
.skip-link:focus{top:var(--space-md)}
.app{max-width:480px;margin:0 auto;min-height:100vh;min-height:100dvh;display:flex;flex-direction:column;background:var(--color-bg)}
.header{position:sticky;top:0;z-index:100;background:var(--color-bg);border-bottom:1px solid var(--color-border);padding:var(--space-md);padding-top:calc(var(--space-md) + var(--safe-top))}
.header-top{display:flex;justify-content:space-between;align-items:center;margin-bottom:var(--space-sm)}
.brand{font-size:var(--font-size-xs);color:var(--color-text-muted);text-transform:uppercase;letter-spacing:0.05em;font-weight:600}
.header-controls{display:flex;gap:var(--space-sm)}
.lang-toggle{display:flex;align-items:center;gap:var(--space-xs);padding:var(--space-xs) var(--space-sm);background:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--radius-full);font-size:var(--font-size-sm);font-weight:500;color:var(--color-text);cursor:pointer;transition:background var(--transition-fast)}
.lang-toggle:hover,.lang-toggle:focus{background:var(--color-border)}
.lang-toggle svg{width:16px;height:16px}
.a11y-toggle{display:flex;align-items:center;justify-content:center;width:36px;height:36px;background:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--radius-full);cursor:pointer;transition:background var(--transition-fast)}
.a11y-toggle:hover,.a11y-toggle:focus{background:var(--color-border)}
.a11y-toggle svg{width:18px;height:18px;color:var(--color-text)}
.page-title{font-size:var(--font-size-xl);font-weight:700;margin:0;line-height:1.3}
.progress-container{padding:var(--space-md);background:var(--color-bg-secondary)}
.progress-bar{height:6px;background:var(--color-border);border-radius:var(--radius-full);overflow:hidden;margin-bottom:var(--space-sm)}
.progress-fill{height:100%;background:var(--color-primary);border-radius:var(--radius-full);transition:width var(--transition-normal)}
.progress-steps{display:flex;justify-content:space-between}
.progress-step{display:flex;flex-direction:column;align-items:center;gap:var(--space-xs);flex:1}
.progress-dot{width:28px;height:28px;border-radius:var(--radius-full);background:var(--color-bg);border:2px solid var(--color-border);display:flex;align-items:center;justify-content:center;font-size:var(--font-size-sm);font-weight:600;color:var(--color-text-muted);transition:all var(--transition-fast);cursor:pointer}
.progress-dot:hover{border-color:var(--color-primary)}
.progress-step.active .progress-dot{background:var(--color-primary);border-color:var(--color-primary);color:white}
.progress-step.completed .progress-dot{background:var(--color-success);border-color:var(--color-success);color:white}
.progress-label{font-size:var(--font-size-xs);color:var(--color-text-muted);font-weight:500}
.progress-step.active .progress-label{color:var(--color-primary);font-weight:600}
.progress-step.completed .progress-label{color:var(--color-success)}
.main-content{flex:1;padding:var(--space-lg);overflow-y:auto;-webkit-overflow-scrolling:touch}
.intro-screen{text-align:center;padding:var(--space-xl) 0}
.intro-icon{width:80px;height:80px;margin:0 auto var(--space-lg);background:var(--color-primary-light);border-radius:var(--radius-lg);display:flex;align-items:center;justify-content:center}
.intro-icon svg{width:40px;height:40px;color:var(--color-primary)}
.intro-title{font-size:var(--font-size-2xl);font-weight:700;margin:0 0 var(--space-md)}
.intro-description{color:var(--color-text-secondary);margin:0 0 var(--space-xl);line-height:1.7}
.requirements-box{background:var(--color-bg-secondary);border-radius:var(--radius-md);padding:var(--space-lg);text-align:left;margin-bottom:var(--space-xl)}
.requirements-title{font-size:var(--font-size-sm);font-weight:600;color:var(--color-text);margin:0 0 var(--space-md);text-transform:uppercase;letter-spacing:0.03em}
.requirements-list{list-style:none;padding:0;margin:0}
.requirements-list li{display:flex;align-items:flex-start;gap:var(--space-sm);padding:var(--space-sm) 0;color:var(--color-text-secondary);font-size:var(--font-size-sm)}
.requirements-list li::before{content:'';width:6px;height:6px;background:var(--color-primary);border-radius:var(--radius-full);margin-top:8px;flex-shrink:0}
.step-card{animation:fadeIn 0.3s ease}
@keyframes fadeIn{from{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}
.step-header{display:flex;align-items:center;gap:var(--space-md);margin-bottom:var(--space-lg)}
.step-number{width:48px;height:48px;background:var(--color-primary);color:white;border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;font-size:var(--font-size-xl);font-weight:700;flex-shrink:0}
.step-title-group{flex:1}
.step-counter{font-size:var(--font-size-xs);color:var(--color-text-muted);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:var(--space-xs)}
.step-title{font-size:var(--font-size-2xl);font-weight:700;margin:0;line-height:1.2}
.step-icon{width:100%;height:160px;background:var(--color-bg-secondary);border-radius:var(--radius-md);display:flex;align-items:center;justify-content:center;margin-bottom:var(--space-lg)}
.step-icon svg{width:80px;height:80px;color:var(--color-primary)}
.step-instruction{font-size:var(--font-size-lg);color:var(--color-text);margin:0 0 var(--space-lg);line-height:1.6}
.checklist{background:var(--color-bg-secondary);border-radius:var(--radius-md);padding:var(--space-md);margin-bottom:var(--space-lg)}
.checklist-title{font-size:var(--font-size-sm);font-weight:600;color:var(--color-text);margin:0 0 var(--space-md);text-transform:uppercase;letter-spacing:0.03em}
.checklist-item{display:flex;align-items:flex-start;gap:var(--space-sm);padding:var(--space-sm) 0}
.checklist-checkbox{width:24px;height:24px;border:2px solid var(--color-border-strong);border-radius:var(--radius-sm);background:var(--color-bg);cursor:pointer;display:flex;align-items:center;justify-content:center;flex-shrink:0;transition:all var(--transition-fast)}
.checklist-checkbox:hover{border-color:var(--color-primary)}
.checklist-checkbox.checked{background:var(--color-success);border-color:var(--color-success)}
.checklist-checkbox svg{width:14px;height:14px;color:white;opacity:0;transition:opacity var(--transition-fast)}
.checklist-checkbox.checked svg{opacity:1}
.checklist-label{font-size:var(--font-size-base);color:var(--color-text-secondary);padding-top:2px;cursor:pointer}
.checklist-item.checked .checklist-label{color:var(--color-text-muted);text-decoration:line-through}
.callout{border-radius:var(--radius-md);padding:var(--space-md);margin-bottom:var(--space-lg);border-left:4px solid}
.callout.warning{background:var(--color-warning-bg);border-color:var(--color-warning)}
.callout.important{background:var(--color-info-bg);border-color:var(--color-info)}
.callout.tip{background:var(--color-success-bg);border-color:var(--color-success)}
.callout-header{display:flex;align-items:center;gap:var(--space-sm);margin-bottom:var(--space-sm)}
.callout-icon{width:20px;height:20px;flex-shrink:0}
.callout.warning .callout-icon{color:var(--color-warning)}
.callout.important .callout-icon{color:var(--color-info)}
.callout.tip .callout-icon{color:var(--color-success)}
.callout-title{font-size:var(--font-size-sm);font-weight:600;margin:0}
.callout.warning .callout-title{color:var(--color-warning)}
.callout.important .callout-title{color:var(--color-info)}
.callout.tip .callout-title{color:var(--color-success)}
.callout-content{font-size:var(--font-size-sm);color:var(--color-text-secondary);margin:0;line-height:1.6}
.callout-toggle{display:flex;align-items:center;justify-content:space-between;width:100%;background:none;border:none;padding:0;cursor:pointer;text-align:left}
.callout-toggle svg{width:20px;height:20px;color:var(--color-text-muted);transition:transform var(--transition-fast)}
.callout.expanded .callout-toggle svg{transform:rotate(180deg)}
.callout-body{display:none;margin-top:var(--space-sm)}
.callout.expanded .callout-body{display:block}
.pairing-section{margin-top:var(--space-xl);padding-top:var(--space-xl);border-top:1px solid var(--color-border)}
.pairing-title{font-size:var(--font-size-lg);font-weight:700;margin:0 0 var(--space-sm)}
.pairing-description{color:var(--color-text-secondary);margin:0 0 var(--space-lg);font-size:var(--font-size-sm)}
.pairing-steps{list-style:none;padding:0;margin:0 0 var(--space-lg);counter-reset:pairing-step}
.pairing-steps li{counter-increment:pairing-step;display:flex;gap:var(--space-md);padding:var(--space-md) 0;border-bottom:1px solid var(--color-border)}
.pairing-steps li:last-child{border-bottom:none}
.pairing-steps li::before{content:counter(pairing-step);width:28px;height:28px;background:var(--color-bg-secondary);border-radius:var(--radius-full);display:flex;align-items:center;justify-content:center;font-size:var(--font-size-sm);font-weight:600;color:var(--color-text);flex-shrink:0}
.led-status{background:var(--color-bg-secondary);border-radius:var(--radius-md);padding:var(--space-lg);margin-bottom:var(--space-lg)}
.led-title{font-size:var(--font-size-base);font-weight:600;margin:0 0 var(--space-md)}
.led-item{display:flex;align-items:flex-start;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border-radius:var(--radius-sm);margin-bottom:var(--space-sm)}
.led-item:last-child{margin-bottom:0}
.led-icon{font-size:var(--font-size-xl);line-height:1}
.led-info{flex:1}
.led-pattern{font-size:var(--font-size-sm);font-weight:600;color:var(--color-text);margin:0 0 var(--space-xs)}
.led-meaning{font-size:var(--font-size-sm);color:var(--color-text-secondary);margin:0}
.led-item.success{border-left:3px solid var(--color-success)}
.led-item.warning{border-left:3px solid var(--color-warning)}
.led-item.error{border-left:3px solid var(--color-error)}
.troubleshooting{margin-top:var(--space-xl)}
.troubleshooting-title{font-size:var(--font-size-lg);font-weight:700;margin:0 0 var(--space-md)}
.faq-item{border:1px solid var(--color-border);border-radius:var(--radius-md);margin-bottom:var(--space-sm);overflow:hidden}
.faq-question{width:100%;display:flex;align-items:center;justify-content:space-between;gap:var(--space-md);padding:var(--space-md);background:var(--color-bg);border:none;font-size:var(--font-size-base);font-weight:500;color:var(--color-text);text-align:left;cursor:pointer;transition:background var(--transition-fast)}
.faq-question:hover{background:var(--color-bg-secondary)}
.faq-question svg{width:20px;height:20px;color:var(--color-text-muted);flex-shrink:0;transition:transform var(--transition-fast)}
.faq-item.expanded .faq-question svg{transform:rotate(180deg)}
.faq-answer{display:none;padding:0 var(--space-md) var(--space-md);font-size:var(--font-size-sm);color:var(--color-text-secondary);line-height:1.6}
.faq-item.expanded .faq-answer{display:block}
.completion-screen{text-align:center;padding:var(--space-xl) 0}
.completion-icon{width:96px;height:96px;margin:0 auto var(--space-lg);background:var(--color-success-bg);border-radius:var(--radius-full);display:flex;align-items:center;justify-content:center}
.completion-icon svg{width:48px;height:48px;color:var(--color-success)}
.completion-title{font-size:var(--font-size-2xl);font-weight:700;margin:0 0 var(--space-md);color:var(--color-success)}
.completion-message{color:var(--color-text-secondary);margin:0 0 var(--space-xl)}
.next-steps{background:var(--color-bg-secondary);border-radius:var(--radius-md);padding:var(--space-lg);text-align:left;margin-bottom:var(--space-xl)}
.next-steps-title{font-size:var(--font-size-sm);font-weight:600;color:var(--color-text);margin:0 0 var(--space-md);text-transform:uppercase;letter-spacing:0.03em}
.next-steps-list{list-style:none;padding:0;margin:0}
.next-steps-list li{display:flex;align-items:flex-start;gap:var(--space-sm);padding:var(--space-sm) 0;color:var(--color-text-secondary);font-size:var(--font-size-sm)}
.next-steps-list li svg{width:16px;height:16px;color:var(--color-success);flex-shrink:0;margin-top:3px}
.bottom-nav{position:sticky;bottom:0;background:var(--color-bg);border-top:1px solid var(--color-border);padding:var(--space-md);padding-bottom:calc(var(--space-md) + var(--safe-bottom));display:flex;gap:var(--space-md)}
.btn{flex:1;display:flex;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-md) var(--space-lg);border-radius:var(--radius-md);font-size:var(--font-size-base);font-weight:600;cursor:pointer;transition:all var(--transition-fast);border:none;min-height:52px;touch-action:manipulation}
.btn-primary{background:var(--color-primary);color:white}
.btn-primary:hover,.btn-primary:focus{background:var(--color-primary-dark)}
.btn-primary:active{transform:scale(0.98)}
.btn-secondary{background:var(--color-bg-secondary);color:var(--color-text);border:1px solid var(--color-border)}
.btn-secondary:hover,.btn-secondary:focus{background:var(--color-border)}
.btn svg{width:20px;height:20px}
.support-footer{padding:var(--space-lg);background:var(--color-bg-secondary);border-top:1px solid var(--color-border)}
.support-buttons{display:flex;gap:var(--space-sm);margin-bottom:var(--space-md)}
.support-btn{flex:1;display:flex;align-items:center;justify-content:center;gap:var(--space-sm);padding:var(--space-md);background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-md);font-size:var(--font-size-sm);font-weight:500;color:var(--color-text);text-decoration:none;cursor:pointer;transition:all var(--transition-fast);min-height:48px}
.support-btn:hover,.support-btn:focus{background:var(--color-bg-secondary);border-color:var(--color-border-strong)}
.support-btn svg{width:18px;height:18px}
.reset-btn{width:100%;padding:var(--space-sm);background:none;border:none;font-size:var(--font-size-sm);color:var(--color-text-muted);cursor:pointer;text-decoration:underline}
.reset-btn:hover{color:var(--color-text-secondary)}
.a11y-panel{position:fixed;top:0;right:0;width:280px;max-width:90vw;height:100%;background:var(--color-bg);border-left:1px solid var(--color-border);box-shadow:var(--shadow-lg);z-index:200;transform:translateX(100%);transition:transform var(--transition-normal);display:flex;flex-direction:column}
.a11y-panel.open{transform:translateX(0)}
.a11y-panel-header{display:flex;align-items:center;justify-content:space-between;padding:var(--space-md);border-bottom:1px solid var(--color-border)}
.a11y-panel-title{font-size:var(--font-size-lg);font-weight:600;margin:0}
.a11y-close{width:36px;height:36px;display:flex;align-items:center;justify-content:center;background:none;border:none;cursor:pointer;border-radius:var(--radius-sm)}
.a11y-close:hover{background:var(--color-bg-secondary)}
.a11y-close svg{width:24px;height:24px}
.a11y-panel-content{flex:1;padding:var(--space-lg);overflow-y:auto}
.a11y-option{margin-bottom:var(--space-xl)}
.a11y-label{font-size:var(--font-size-sm);font-weight:600;color:var(--color-text);margin-bottom:var(--space-sm);display:block}
.a11y-toggle-switch{display:flex;align-items:center;gap:var(--space-md)}
.toggle-switch{position:relative;width:48px;height:28px;background:var(--color-border);border-radius:var(--radius-full);cursor:pointer;transition:background var(--transition-fast)}
.toggle-switch.active{background:var(--color-primary)}
.toggle-switch::after{content:'';position:absolute;top:2px;left:2px;width:24px;height:24px;background:white;border-radius:var(--radius-full);box-shadow:var(--shadow-sm);transition:transform var(--transition-fast)}
.toggle-switch.active::after{transform:translateX(20px)}
.text-size-control{display:flex;align-items:center;gap:var(--space-md)}
.text-size-btn{width:40px;height:40px;display:flex;align-items:center;justify-content:center;background:var(--color-bg-secondary);border:1px solid var(--color-border);border-radius:var(--radius-sm);font-size:var(--font-size-lg);font-weight:600;cursor:pointer;transition:all var(--transition-fast)}
.text-size-btn:hover{background:var(--color-border)}
.text-size-value{font-size:var(--font-size-base);font-weight:500;min-width:60px;text-align:center}
.overlay{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,0.4);z-index:150;opacity:0;visibility:hidden;transition:opacity var(--transition-normal),visibility var(--transition-normal)}
.overlay.visible{opacity:1;visibility:visible}
.lang-dropdown{position:relative}
.lang-menu{position:absolute;top:100%;right:0;margin-top:var(--space-xs);background:var(--color-bg);border:1px solid var(--color-border);border-radius:var(--radius-md);box-shadow:var(--shadow-md);min-width:140px;z-index:100;opacity:0;visibility:hidden;transform:translateY(-8px);transition:all var(--transition-fast)}
.lang-dropdown.open .lang-menu{opacity:1;visibility:visible;transform:translateY(0)}
.lang-option{display:block;width:100%;padding:var(--space-sm) var(--space-md);background:none;border:none;font-size:var(--font-size-sm);color:var(--color-text);text-align:left;cursor:pointer;transition:background var(--transition-fast)}
.lang-option:first-child{border-radius:var(--radius-md) var(--radius-md) 0 0}
.lang-option:last-child{border-radius:0 0 var(--radius-md) var(--radius-md)}
.lang-option:hover,.lang-option.active{background:var(--color-bg-secondary)}
.lang-option.active{font-weight:600;color:var(--color-primary)}
.visually-hidden{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}
.hidden{display:none!important}
  </style>
</head>
<body>
  <a href="#main" class="skip-link">Skip to main content</a>
  <div class="app" id="app"><div style="display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px;"><p style="color:var(--color-text-muted);">Loading...</p></div></div>
  <div class="overlay" id="overlay" aria-hidden="true"></div>
  <div class="a11y-panel" id="a11yPanel" role="dialog" aria-labelledby="a11yPanelTitle" aria-hidden="true">
    <div class="a11y-panel-header">
      <h2 class="a11y-panel-title" id="a11yPanelTitle">Accessibility</h2>
      <button class="a11y-close" id="a11yClose" aria-label="Close accessibility panel">
        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
      </button>
    </div>
    <div class="a11y-panel-content" id="a11yContent"></div>
  </div>
  <script>
const CONTENT={en:{"meta":{"lang":"en","langName":"English","title":"DriveWell Tag Installation Guide","subtitle":"Quick Setup in 3 Simple Steps","brand":"Cambridge Mobile Telematics"},"accessibility":{"reduceMotion":"Reduce motion","highContrast":"High contrast","textSize":"Text size","smaller":"Smaller","larger":"Larger"},"ui":{"stepOf":"Step {current} of {total}","next":"Next","back":"Back","done":"Done","markComplete":"Mark as complete","completed":"Completed","expand":"More info","collapse":"Less info","skipToStep":"Skip to step","progress":"Progress","downloadPdf":"Download PDF Guide","contactSupport":"Contact Support","resetProgress":"Start Over","troubleshooting":"Troubleshooting","importantNote":"Important","tip":"Tip","warning":"Warning","checklist":"Checklist","ledStatus":"LED Status Guide","pairingSteps":"Pairing Steps"},"intro":{"welcome":"Welcome!","description":"This guide will help you install your DriveWell Tag in just a few minutes. The Tag provides accurate distance measurement and vehicle risk assessment.","beforeYouStart":"Before you start","requirements":["Your DriveWell Tag (in packaging)","Access to your vehicle","Your auto insurance app installed (for pairing)"],"startButton":"Start Installation"},"steps":[{"id":"peel","number":1,"title":"Peel","shortTitle":"Peel","instruction":"Peel the two adhesive strips located on the back of the DriveWell Tag.","checklist":["Locate adhesive strips on back of Tag","Peel both strips completely"],"callout":{"type":"warning","title":"One-time adhesive","content":"This adhesive is set-and-forget and meant to be applied once. Please do not remove and re-apply the DriveWell Tag."},"image":"peel-icon"},{"id":"stick","number":2,"title":"Stick","shortTitle":"Stick","instruction":"Apply the DriveWell Tag to the windshield behind the rearview mirror.","checklist":["Position Tag behind rearview mirror","Press firmly for 10 seconds","Verify Tag does not obstruct your view"],"callout":{"type":"important","title":"Visibility check","content":"Make sure the DriveWell Tag does not obstruct your vision while driving. Position it so it's hidden behind the mirror housing."},"image":"stick-icon"},{"id":"drive","number":3,"title":"Drive","shortTitle":"Drive","instruction":"Once applied, you may resume your daily driving routines.","checklist":["Tag is securely mounted","View is not obstructed"],"callout":{"type":"tip","title":"Automatic recording","content":"The Tag identifies the vehicle and records all trips in the Tag-equipped vehicle with or without a phone present. No user interaction is required to transfer vehicle data."},"image":"drive-icon"}],"pairing":{"title":"Optional: Pair with Your App","description":"For the most accurate safe driving data, pair your telematics app with the Tag.","steps":["Open the auto insurance app on your phone","Hold your phone near the Tag for approximately 2 seconds","Confirm the pairing prompt on your phone","Wait for Bluetooth pairing to complete","Check for a message indicating successful pairing"],"verifyTitle":"Verify pairing","verifyInstruction":"Press and hold the button on the Tag for 5 seconds to check the LED light status."},"ledStatus":{"title":"LED Light Status","statuses":[{"id":"success","icon":"‚úÖ","pattern":"Blinks for 2 seconds","meaning":"Associated correctly","type":"success"},{"id":"no-phone","icon":"üö®","pattern":"Single blink every 2 seconds","meaning":"No phone associated, but Tag is still recording trips","type":"warning"},{"id":"faulty","icon":"‚ùå","pattern":"Repeated double blink","meaning":"Faulty - contact support","type":"error"},{"id":"dead-battery","icon":"‚ùå","pattern":"Five rapid blinks","meaning":"Dead battery - contact support for replacement","type":"error"}]},"troubleshooting":{"title":"Troubleshooting","items":[{"question":"The Tag fell off the windshield","answer":"The adhesive is one-time use. Contact support for a replacement Tag."},{"question":"My phone won't pair with the Tag","answer":"Ensure Bluetooth is enabled on your phone. Hold the phone within 2 inches of the Tag. If pairing still fails, restart your phone and try again."},{"question":"The LED shows rapid blinks","answer":"Five rapid blinks indicate a dead battery. Batteries are non-rechargeable. Contact your insurance company for a new Tag."},{"question":"The LED shows double blinks","answer":"Repeated double blinks indicate the Tag is faulty. Contact support for a replacement."},{"question":"I drove without my phone - will trips be recorded?","answer":"Yes! The Tag stores all trip information and uploads trips to the app the next time it connects to a phone."}]},"completion":{"title":"Installation Complete!","message":"Your DriveWell Tag is ready to use. It will automatically record your trips.","nextSteps":["Resume your normal driving routine","Keep your insurance app installed for best results","Check the LED status anytime by holding the button for 5 seconds"],"supportNote":"For additional assistance, contact your auto insurance company's technical support."},"support":{"title":"Need Help?","phone":"(800) 941-7177","email":"info@cmtelematics.com","address":"314 Main Street, Suite 1200, Cambridge, MA 02142","emailSubject":"DriveWell Tag Support Request","emailBody":"Hi,\n\nI need help with my DriveWell Tag installation.\n\nTag MAC Address (if known): \nIssue: \n\nThank you."},"footer":{"copyright":"¬© Cambridge Mobile Telematics","privacy":"Privacy Policy","terms":"Terms of Service"}},es:{"meta":{"lang":"es","langName":"Espa√±ol","title":"Gu√≠a de Instalaci√≥n del DriveWell Tag","subtitle":"Configuraci√≥n R√°pida en 3 Sencillos Pasos","brand":"Cambridge Mobile Telematics"},"accessibility":{"reduceMotion":"Reducir movimiento","highContrast":"Alto contraste","textSize":"Tama√±o de texto","smaller":"M√°s peque√±o","larger":"M√°s grande"},"ui":{"stepOf":"Paso {current} de {total}","next":"Siguiente","back":"Atr√°s","done":"Listo","markComplete":"Marcar como completado","completed":"Completado","expand":"M√°s informaci√≥n","collapse":"Menos informaci√≥n","skipToStep":"Ir al paso","progress":"Progreso","downloadPdf":"Descargar Gu√≠a PDF","contactSupport":"Contactar Soporte","resetProgress":"Empezar de Nuevo","troubleshooting":"Soluci√≥n de Problemas","importantNote":"Importante","tip":"Consejo","warning":"Advertencia","checklist":"Lista de verificaci√≥n","ledStatus":"Gu√≠a de Estado LED","pairingSteps":"Pasos de Emparejamiento"},"intro":{"welcome":"¬°Bienvenido!","description":"Esta gu√≠a le ayudar√° a instalar su DriveWell Tag en solo unos minutos. El Tag proporciona medici√≥n precisa de distancia y evaluaci√≥n de riesgo del veh√≠culo.","beforeYouStart":"Antes de comenzar","requirements":["Su DriveWell Tag (en su empaque)","Acceso a su veh√≠culo","Su aplicaci√≥n de seguro de auto instalada (para emparejar)"],"startButton":"Comenzar Instalaci√≥n"},"steps":[{"id":"peel","number":1,"title":"Despegar","shortTitle":"Despegar","instruction":"Despegue las dos tiras adhesivas ubicadas en la parte posterior del DriveWell Tag.","checklist":["Localice las tiras adhesivas en la parte posterior del Tag","Despegue ambas tiras completamente"],"callout":{"type":"warning","title":"Adhesivo de un solo uso","content":"Este adhesivo est√° dise√±ado para aplicarse una sola vez. Por favor no retire ni vuelva a aplicar el DriveWell Tag."},"image":"peel-icon"},{"id":"stick","number":2,"title":"Pegar","shortTitle":"Pegar","instruction":"Aplique el DriveWell Tag en el parabrisas detr√°s del espejo retrovisor.","checklist":["Posicione el Tag detr√°s del espejo retrovisor","Presione firmemente durante 10 segundos","Verifique que el Tag no obstruya su visi√≥n"],"callout":{"type":"important","title":"Verificaci√≥n de visibilidad","content":"Aseg√∫rese de que el DriveWell Tag no obstruya su visi√≥n mientras conduce. Col√≥quelo de manera que quede oculto detr√°s de la carcasa del espejo."},"image":"stick-icon"},{"id":"drive","number":3,"title":"Conducir","shortTitle":"Conducir","instruction":"Una vez aplicado, puede continuar con sus rutinas de conducci√≥n diarias.","checklist":["El Tag est√° montado de forma segura","La visi√≥n no est√° obstruida"],"callout":{"type":"tip","title":"Grabaci√≥n autom√°tica","content":"El Tag identifica el veh√≠culo y registra todos los viajes en el veh√≠culo equipado con Tag, con o sin tel√©fono presente. No se requiere interacci√≥n del usuario para transferir datos del veh√≠culo."},"image":"drive-icon"}],"pairing":{"title":"Opcional: Emparejar con Su App","description":"Para obtener los datos de conducci√≥n segura m√°s precisos, empareje su aplicaci√≥n de telem√°tica con el Tag.","steps":["Abra la aplicaci√≥n de seguro de auto en su tel√©fono","Sostenga su tel√©fono cerca del Tag durante aproximadamente 2 segundos","Confirme el mensaje de emparejamiento en su tel√©fono","Espere a que se complete el emparejamiento Bluetooth","Busque un mensaje que indique emparejamiento exitoso"],"verifyTitle":"Verificar emparejamiento","verifyInstruction":"Presione y mantenga presionado el bot√≥n del Tag durante 5 segundos para verificar el estado de la luz LED."},"ledStatus":{"title":"Estado de la Luz LED","statuses":[{"id":"success","icon":"‚úÖ","pattern":"Parpadea durante 2 segundos","meaning":"Asociado correctamente","type":"success"},{"id":"no-phone","icon":"üö®","pattern":"Un parpadeo cada 2 segundos","meaning":"Sin tel√©fono asociado, pero el Tag sigue grabando viajes","type":"warning"},{"id":"faulty","icon":"‚ùå","pattern":"Doble parpadeo repetido","meaning":"Defectuoso - contacte soporte","type":"error"},{"id":"dead-battery","icon":"‚ùå","pattern":"Cinco parpadeos r√°pidos","meaning":"Bater√≠a agotada - contacte soporte para reemplazo","type":"error"}]},"troubleshooting":{"title":"Soluci√≥n de Problemas","items":[{"question":"El Tag se cay√≥ del parabrisas","answer":"El adhesivo es de un solo uso. Contacte soporte para obtener un Tag de reemplazo."},{"question":"Mi tel√©fono no se empareja con el Tag","answer":"Aseg√∫rese de que el Bluetooth est√© habilitado en su tel√©fono. Sostenga el tel√©fono a menos de 5 cm del Tag. Si el emparejamiento a√∫n falla, reinicie su tel√©fono e intente de nuevo."},{"question":"El LED muestra parpadeos r√°pidos","answer":"Cinco parpadeos r√°pidos indican bater√≠a agotada. Las bater√≠as no son recargables. Contacte a su compa√±√≠a de seguros para obtener un nuevo Tag."},{"question":"El LED muestra parpadeos dobles","answer":"Los parpadeos dobles repetidos indican que el Tag est√° defectuoso. Contacte soporte para obtener un reemplazo."},{"question":"Conduje sin mi tel√©fono - ¬øse grabar√°n los viajes?","answer":"¬°S√≠! El Tag almacena toda la informaci√≥n de los viajes y los sube a la app la pr√≥xima vez que se conecte a un tel√©fono."}]},"completion":{"title":"¬°Instalaci√≥n Completa!","message":"Su DriveWell Tag est√° listo para usar. Grabar√° autom√°ticamente sus viajes.","nextSteps":["Contin√∫e con su rutina de conducci√≥n normal","Mantenga su app de seguro instalada para mejores resultados","Verifique el estado LED en cualquier momento manteniendo presionado el bot√≥n durante 5 segundos"],"supportNote":"Para asistencia adicional, contacte el soporte t√©cnico de su compa√±√≠a de seguros de auto."},"support":{"title":"¬øNecesita Ayuda?","phone":"(800) 941-7177","email":"info@cmtelematics.com","address":"314 Main Street, Suite 1200, Cambridge, MA 02142","emailSubject":"Solicitud de Soporte DriveWell Tag","emailBody":"Hola,\n\nNecesito ayuda con la instalaci√≥n de mi DriveWell Tag.\n\nDirecci√≥n MAC del Tag (si la conoce): \nProblema: \n\nGracias."},"footer":{"copyright":"¬© Cambridge Mobile Telematics","privacy":"Pol√≠tica de Privacidad","terms":"T√©rminos de Servicio"}}};
const ICONS={globe:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="2" y1="12" x2="22" y2="12"></line><path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path></svg>',mail:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>',settings:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>',check:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="20 6 9 17 4 12"></polyline></svg>',chevronDown:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg>',chevronRight:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="9 18 15 12 9 6"></polyline></svg>',chevronLeft:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="15 18 9 12 15 6"></polyline></svg>',alertTriangle:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>',info:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>',lightbulb:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 18h6"></path><path d="M10 22h4"></path><path d="M15.09 14c.18-.98.65-1.74 1.41-2.5A4.65 4.65 0 0 0 18 8 6 6 0 0 0 6 8c0 1 .23 2.23 1.5 3.5A4.61 4.61 0 0 1 8.91 14"></path></svg>',download:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path><polyline points="7 10 12 15 17 10"></polyline><line x1="12" y1="15" x2="12" y2="3"></line></svg>',phone:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"></path></svg>',tag:'<svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line></svg>',peel:'<svg viewBox="0 0 80 80" fill="none" stroke="currentColor" stroke-width="2.5"><rect x="20" y="20" width="40" height="40" rx="4" stroke-dasharray="4 2"/><path d="M35 35 L45 45 M45 35 L35 45" stroke-linecap="round"/><path d="M20 50 Q15 55 20 60 L30 50" fill="none" stroke-width="2"/><path d="M60 20 Q65 15 70 20 L60 30" fill="none" stroke-width="2"/></svg>',stick:'<svg viewBox="0 0 80 80" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M10 60 L70 60 L65 25 L15 25 Z" fill="none"/><ellipse cx="40" cy="20" rx="8" ry="4"/><line x1="40" y1="24" x2="40" y2="35"/><rect x="30" y="38" width="20" height="15" rx="2" fill="none"/><circle cx="40" cy="45" r="3"/></svg>',drive:'<svg viewBox="0 0 80 80" fill="none" stroke="currentColor" stroke-width="2.5"><path d="M15 50 L20 35 L60 35 L65 50 L65 55 L15 55 Z" fill="none"/><circle cx="25" cy="55" r="6"/><circle cx="55" cy="55" r="6"/><path d="M25 35 L30 25 L50 25 L55 35" fill="none"/><line x1="40" y1="15" x2="40" y2="22"/><path d="M35 17 L40 12 L45 17"/></svg>'};
let state={currentLang:'en',currentScreen:'intro',currentStep:0,completedSteps:[],checklistState:{},expandedCallouts:{},expandedFaqs:{},a11y:{reduceMotion:false,highContrast:false,textSize:100}};
function saveState(){try{localStorage.setItem('drivewell-guide-state',JSON.stringify({currentLang:state.currentLang,currentScreen:state.currentScreen,currentStep:state.currentStep,completedSteps:state.completedSteps,checklistState:state.checklistState,a11y:state.a11y}))}catch(e){}}
function loadState(){try{const saved=localStorage.getItem('drivewell-guide-state');if(saved){const parsed=JSON.parse(saved);state={...state,...parsed}}}catch(e){}}
function resetState(){state={...state,currentScreen:'intro',currentStep:0,completedSteps:[],checklistState:{},expandedCallouts:{},expandedFaqs:{}};saveState();render()}
function t(){return CONTENT[state.currentLang]||CONTENT.en}
function getStepIcon(imageId){const iconMap={'peel-icon':ICONS.peel,'stick-icon':ICONS.stick,'drive-icon':ICONS.drive};return iconMap[imageId]||ICONS.tag}
function getCalloutIcon(type){const iconMap={'warning':ICONS.alertTriangle,'important':ICONS.info,'tip':ICONS.lightbulb};return iconMap[type]||ICONS.info}
function formatStepOf(current,total){return t().ui.stepOf.replace('{current}',current).replace('{total}',total)}
function getProgressPercent(){const content=t();const totalSteps=content.steps.length;if(state.currentScreen==='intro')return 0;if(state.currentScreen==='complete')return 100;return((state.currentStep+1)/totalSteps)*100}
function renderHeader(){const content=t();const availableLangs=Object.entries(CONTENT).map(([code,data])=>({code,name:data.meta.langName}));return`<header class="header"><div class="header-top"><span class="brand">${content.meta.brand}</span><div class="header-controls"><div class="lang-dropdown" id="langDropdown"><button class="lang-toggle" id="langToggle" aria-label="Change language" aria-expanded="false">${ICONS.globe}<span>${content.meta.langName}</span></button><div class="lang-menu" role="menu">${availableLangs.map(lang=>`<button class="lang-option ${lang.code===state.currentLang?'active':''}" data-lang="${lang.code}" role="menuitem">${lang.name}</button>`).join('')}</div></div><button class="a11y-toggle" id="a11yToggle" aria-label="Accessibility settings">${ICONS.settings}</button></div></div><h1 class="page-title">${content.meta.title}</h1></header>`}
function renderProgress(){const content=t();const steps=content.steps;return`<div class="progress-container" role="navigation" aria-label="${content.ui.progress}"><div class="progress-bar"><div class="progress-fill" style="width:${getProgressPercent()}%"></div></div><div class="progress-steps">${steps.map((step,idx)=>{const isActive=state.currentScreen==='step'&&state.currentStep===idx;const isCompleted=state.completedSteps.includes(idx);return`<div class="progress-step ${isActive?'active':''} ${isCompleted?'completed':''}"><button class="progress-dot" data-step="${idx}" aria-label="${content.ui.skipToStep} ${idx+1}: ${step.shortTitle}" ${state.currentScreen==='intro'?'disabled':''}>${isCompleted?ICONS.check:step.number}</button><span class="progress-label">${step.shortTitle}</span></div>`}).join('')}</div></div>`}
function renderIntro(){const content=t();return`<div class="intro-screen"><div class="intro-icon">${ICONS.tag}</div><h2 class="intro-title">${content.intro.welcome}</h2><p class="intro-description">${content.intro.description}</p><div class="requirements-box"><h3 class="requirements-title">${content.intro.beforeYouStart}</h3><ul class="requirements-list">${content.intro.requirements.map(req=>`<li>${req}</li>`).join('')}</ul></div></div>`}
function renderStep(stepIdx){const content=t();const step=content.steps[stepIdx];const checklistKey=`step-${stepIdx}`;const checklistChecked=state.checklistState[checklistKey]||[];return`<div class="step-card"><div class="step-header"><div class="step-number">${step.number}</div><div class="step-title-group"><div class="step-counter">${formatStepOf(step.number,content.steps.length)}</div><h2 class="step-title">${step.title}</h2></div></div><div class="step-icon" aria-hidden="true">${getStepIcon(step.image)}</div><p class="step-instruction">${step.instruction}</p><div class="checklist" role="group" aria-labelledby="checklist-title-${stepIdx}"><h3 class="checklist-title" id="checklist-title-${stepIdx}">${content.ui.checklist}</h3>${step.checklist.map((item,itemIdx)=>{const isChecked=checklistChecked.includes(itemIdx);return`<div class="checklist-item ${isChecked?'checked':''}"><button class="checklist-checkbox ${isChecked?'checked':''}" data-step="${stepIdx}" data-item="${itemIdx}" role="checkbox" aria-checked="${isChecked}" aria-label="${item}">${ICONS.check}</button><span class="checklist-label" data-step="${stepIdx}" data-item="${itemIdx}">${item}</span></div>`}).join('')}</div><div class="callout ${step.callout.type}"><div class="callout-header"><span class="callout-icon">${getCalloutIcon(step.callout.type)}</span><h4 class="callout-title">${step.callout.title}</h4></div><p class="callout-content">${step.callout.content}</p></div>${stepIdx===content.steps.length-1?renderPairingSection():''}</div>`}
function renderPairingSection(){const content=t();return`<div class="pairing-section"><h3 class="pairing-title">${content.pairing.title}</h3><p class="pairing-description">${content.pairing.description}</p><ol class="pairing-steps">${content.pairing.steps.map(step=>`<li>${step}</li>`).join('')}</ol><div class="led-status"><h4 class="led-title">${content.ledStatus.title}</h4>${content.ledStatus.statuses.map(status=>`<div class="led-item ${status.type}"><span class="led-icon">${status.icon}</span><div class="led-info"><p class="led-pattern">${status.pattern}</p><p class="led-meaning">${status.meaning}</p></div></div>`).join('')}</div><p style="font-size:var(--font-size-sm);color:var(--color-text-secondary);margin-top:var(--space-md);">${content.pairing.verifyInstruction}</p></div><div class="troubleshooting"><h3 class="troubleshooting-title">${content.troubleshooting.title}</h3>${content.troubleshooting.items.map((item,idx)=>{const isExpanded=state.expandedFaqs[`faq-${idx}`];return`<div class="faq-item ${isExpanded?'expanded':''}"><button class="faq-question" data-faq="${idx}" aria-expanded="${isExpanded}">${item.question}${ICONS.chevronDown}</button><div class="faq-answer">${item.answer}</div></div>`}).join('')}</div>`}
function renderCompletion(){const content=t();return`<div class="completion-screen"><div class="completion-icon">${ICONS.check}</div><h2 class="completion-title">${content.completion.title}</h2><p class="completion-message">${content.completion.message}</p><div class="next-steps"><h3 class="next-steps-title">Next Steps</h3><ul class="next-steps-list">${content.completion.nextSteps.map(step=>`<li>${ICONS.check}${step}</li>`).join('')}</ul></div><p style="font-size:var(--font-size-sm);color:var(--color-text-muted);">${content.completion.supportNote}</p></div>`}
function renderBottomNav(){const content=t();const steps=content.steps;if(state.currentScreen==='intro'){return`<nav class="bottom-nav"><button class="btn btn-primary" id="startBtn">${content.intro.startButton}${ICONS.chevronRight}</button></nav>`}if(state.currentScreen==='complete'){return`<nav class="bottom-nav"><button class="btn btn-secondary" id="restartBtn">${content.ui.resetProgress}</button></nav>`}const isFirstStep=state.currentStep===0;const isLastStep=state.currentStep===steps.length-1;return`<nav class="bottom-nav">${!isFirstStep?`<button class="btn btn-secondary" id="backBtn">${ICONS.chevronLeft}${content.ui.back}</button>`:''}<button class="btn btn-primary" id="nextBtn">${isLastStep?content.ui.done:content.ui.next}${ICONS.chevronRight}</button></nav>`}
function renderSupportFooter(){const content=t();return`<footer class="support-footer"><div class="support-buttons"><a href="DriveWell_Tag_Installation_Guide.pdf" download class="support-btn">${ICONS.download}${content.ui.downloadPdf}</a><a href="tel:+18009417177" class="support-btn">${ICONS.phone}${content.support.phone}</a></div><div class="support-buttons"><a href="mailto:${content.support.email}?subject=${encodeURIComponent(content.support.emailSubject)}&body=${encodeURIComponent(content.support.emailBody)}" class="support-btn">${ICONS.mail}${content.support.email}</a></div><button class="reset-btn" id="resetBtn">${content.ui.resetProgress}</button></footer>`}
function renderA11yPanel(){const content=t();document.getElementById('a11yContent').innerHTML=`<div class="a11y-option"><span class="a11y-label">${content.accessibility.reduceMotion}</span><div class="a11y-toggle-switch"><button class="toggle-switch ${state.a11y.reduceMotion?'active':''}" id="reduceMotionToggle" role="switch" aria-checked="${state.a11y.reduceMotion}"></button></div></div><div class="a11y-option"><span class="a11y-label">${content.accessibility.highContrast}</span><div class="a11y-toggle-switch"><button class="toggle-switch ${state.a11y.highContrast?'active':''}" id="highContrastToggle" role="switch" aria-checked="${state.a11y.highContrast}"></button></div></div><div class="a11y-option"><span class="a11y-label">${content.accessibility.textSize}</span><div class="text-size-control"><button class="text-size-btn" id="textSizeDown" aria-label="${content.accessibility.smaller}">A-</button><span class="text-size-value">${state.a11y.textSize}%</span><button class="text-size-btn" id="textSizeUp" aria-label="${content.accessibility.larger}">A+</button></div></div>`}
function render(){const app=document.getElementById('app');let mainContent='';if(state.currentScreen==='intro'){mainContent=renderIntro()}else if(state.currentScreen==='step'){mainContent=renderStep(state.currentStep)}else if(state.currentScreen==='complete'){mainContent=renderCompletion()}app.innerHTML=`${renderHeader()}${renderProgress()}<main class="main-content" id="main">${mainContent}</main>${renderBottomNav()}${renderSupportFooter()}`;renderA11yPanel();applyA11ySettings();attachEventListeners()}
function applyA11ySettings(){document.documentElement.setAttribute('data-reduce-motion',state.a11y.reduceMotion);document.documentElement.setAttribute('data-theme',state.a11y.highContrast?'high-contrast':'light');document.documentElement.style.setProperty('--base-font-size',`${state.a11y.textSize/100*16}px`)}
function attachEventListeners(){const langToggle=document.getElementById('langToggle');const langDropdown=document.getElementById('langDropdown');if(langToggle){langToggle.addEventListener('click',()=>{langDropdown.classList.toggle('open');langToggle.setAttribute('aria-expanded',langDropdown.classList.contains('open'))})}document.querySelectorAll('.lang-option').forEach(btn=>{btn.addEventListener('click',()=>{state.currentLang=btn.dataset.lang;document.documentElement.lang=state.currentLang;langDropdown.classList.remove('open');saveState();render()})});const a11yToggle=document.getElementById('a11yToggle');const a11yPanel=document.getElementById('a11yPanel');const a11yClose=document.getElementById('a11yClose');const overlay=document.getElementById('overlay');if(a11yToggle){a11yToggle.addEventListener('click',()=>{a11yPanel.classList.add('open');a11yPanel.setAttribute('aria-hidden','false');overlay.classList.add('visible')})}if(a11yClose){a11yClose.addEventListener('click',closeA11yPanel)}if(overlay){overlay.addEventListener('click',closeA11yPanel)}function closeA11yPanel(){a11yPanel.classList.remove('open');a11yPanel.setAttribute('aria-hidden','true');overlay.classList.remove('visible')}const reduceMotionToggle=document.getElementById('reduceMotionToggle');if(reduceMotionToggle){reduceMotionToggle.addEventListener('click',()=>{state.a11y.reduceMotion=!state.a11y.reduceMotion;saveState();render()})}const highContrastToggle=document.getElementById('highContrastToggle');if(highContrastToggle){highContrastToggle.addEventListener('click',()=>{state.a11y.highContrast=!state.a11y.highContrast;saveState();render()})}const textSizeDown=document.getElementById('textSizeDown');const textSizeUp=document.getElementById('textSizeUp');if(textSizeDown){textSizeDown.addEventListener('click',()=>{state.a11y.textSize=Math.max(80,state.a11y.textSize-10);saveState();render()})}if(textSizeUp){textSizeUp.addEventListener('click',()=>{state.a11y.textSize=Math.min(150,state.a11y.textSize+10);saveState();render()})}const startBtn=document.getElementById('startBtn');if(startBtn){startBtn.addEventListener('click',()=>{state.currentScreen='step';state.currentStep=0;saveState();render()})}const nextBtn=document.getElementById('nextBtn');if(nextBtn){nextBtn.addEventListener('click',()=>{const content=t();if(!state.completedSteps.includes(state.currentStep)){state.completedSteps.push(state.currentStep)}if(state.currentStep<content.steps.length-1){state.currentStep++;state.currentScreen='step'}else{state.currentScreen='complete'}saveState();render();window.scrollTo(0,0)})}const backBtn=document.getElementById('backBtn');if(backBtn){backBtn.addEventListener('click',()=>{if(state.currentStep>0){state.currentStep--;saveState();render();window.scrollTo(0,0)}})}const restartBtn=document.getElementById('restartBtn');const resetBtn=document.getElementById('resetBtn');if(restartBtn){restartBtn.addEventListener('click',resetState)}if(resetBtn){resetBtn.addEventListener('click',resetState)}document.querySelectorAll('.progress-dot').forEach(dot=>{dot.addEventListener('click',()=>{const stepIdx=parseInt(dot.dataset.step);if(!dot.disabled){state.currentScreen='step';state.currentStep=stepIdx;saveState();render()}})});document.querySelectorAll('.checklist-checkbox, .checklist-label').forEach(el=>{el.addEventListener('click',()=>{const stepIdx=parseInt(el.dataset.step);const itemIdx=parseInt(el.dataset.item);const key=`step-${stepIdx}`;if(!state.checklistState[key]){state.checklistState[key]=[]}const idx=state.checklistState[key].indexOf(itemIdx);if(idx===-1){state.checklistState[key].push(itemIdx)}else{state.checklistState[key].splice(idx,1)}saveState();render()})});document.querySelectorAll('.faq-question').forEach(btn=>{btn.addEventListener('click',()=>{const faqIdx=btn.dataset.faq;const key=`faq-${faqIdx}`;state.expandedFaqs[key]=!state.expandedFaqs[key];render()})});document.addEventListener('click',(e)=>{if(langDropdown&&!langDropdown.contains(e.target)){langDropdown.classList.remove('open');if(langToggle)langToggle.setAttribute('aria-expanded','false')}})}
loadState();applyA11ySettings();render();
  </script>
</body>
</html>
